<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .profile-card { 
            border: 1px solid #ddd; 
            border-radius: 10px; 
            padding: 20px; 
            margin: 20px 0; 
            text-align: center;
            background: #f9f9f9;
        }
        .profile-image { 
            width: 150px; 
            height: 150px; 
            border-radius: 50%; 
            margin: 10px 0; 
        }
        .btn { 
            background: #007bff; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        .btn:hover { background: #0056b3; }
        .loading { color: #666; font-style: italic; }
        .error { color: red; }
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            text-align: left;
            margin: 15px 0;
        }
        .info-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #eee;
        }
        .label { font-weight: bold; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ² ëœë¤ ì‚¬ìš©ì í”„ë¡œí•„ ìƒì„±ê¸°</h1>
        
        <button class="btn" id="generateUser">ìƒˆë¡œìš´ ì‚¬ìš©ì ìƒì„±</button>
        <button class="btn" id="saveUser">í˜„ì¬ ì‚¬ìš©ì ì €ì¥</button>
        <button class="btn" id="loadSavedUser">ì €ì¥ëœ ì‚¬ìš©ì ë¶ˆëŸ¬ì˜¤ê¸°</button>
        
        <div id="profileContainer">
            <div class="profile-card">
                <p>ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ëœë¤ ì‚¬ìš©ìë¥¼ ìƒì„±í•´ë³´ì„¸ìš”!</p>
            </div>
        </div>

        <div id="savedProfiles">
            <h3>ğŸ’¾ ì €ì¥ëœ í”„ë¡œí•„ë“¤</h3>
            <div id="savedList">ì €ì¥ëœ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let currentUser = null;

            // ìƒˆë¡œìš´ ì‚¬ìš©ì ìƒì„±
            $('#generateUser').click(function() {
                $('#profileContainer').html('<div class="profile-card loading">ğŸ”„ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>');
                
                $.getJSON('https://randomuser.me/api/', function(data) {
                    currentUser = data.results[0];
                    displayUser(currentUser);
                }).fail(function() {
                    $('#profileContainer').html('<div class="profile-card error">âŒ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</div>');
                });
            });

            // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ í•¨ìˆ˜
            function displayUser(user) {
                const userHtml = `
                    <div class="profile-card">
                        <img src="${user.picture.large}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="profile-image">
                        <h2>${user.name.first} ${user.name.last}</h2>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="label">ì´ë©”ì¼</div>
                                <div>${user.email}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">ì „í™”ë²ˆí˜¸</div>
                                <div>${user.phone}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">ë‚˜ì´</div>
                                <div>${user.dob.age}ì„¸</div>
                            </div>
                            <div class="info-item">
                                <div class="label">ì„±ë³„</div>
                                <div>${user.gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±'}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">êµ­ê°€</div>
                                <div>${user.location.country}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">ë„ì‹œ</div>
                                <div>${user.location.city}</div>
                            </div>
                        </div>
                        
                        <p><strong>ì£¼ì†Œ:</strong> ${user.location.street.number} ${user.location.street.name}</p>
                    </div>
                `;
                $('#profileContainer').html(userHtml);
            }

            // í˜„ì¬ ì‚¬ìš©ì ì €ì¥
            $('#saveUser').click(function() {
                if (!currentUser) {
                    alert('ë¨¼ì € ì‚¬ìš©ìë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”!');
                    return;
                }

                // ê¸°ì¡´ ì €ì¥ëœ ì‚¬ìš©ìë“¤ ê°€ì ¸ì˜¤ê¸°
                const savedUsers = JSON.parse(localStorage.getItem('savedUsers') || '[]');
                
                // í˜„ì¬ ì‚¬ìš©ì ì¶”ê°€ (ì¤‘ë³µ í™•ì¸)
                const isDuplicate = savedUsers.some(user => user.email === currentUser.email);
                if (isDuplicate) {
                    alert('ì´ë¯¸ ì €ì¥ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤!');
                    return;
                }

                savedUsers.push({
                    ...currentUser,
                    savedAt: new Date().toLocaleString()
                });

                // localStorageì— ì €ì¥
                localStorage.setItem('savedUsers', JSON.stringify(savedUsers));
                alert('ì‚¬ìš©ìê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                displaySavedUsers();
            });

            // ì €ì¥ëœ ì‚¬ìš©ìë“¤ í‘œì‹œ
            function displaySavedUsers() {
                const savedUsers = JSON.parse(localStorage.getItem('savedUsers') || '[]');
                
                if (savedUsers.length === 0) {
                    $('#savedList').html('ì €ì¥ëœ í”„ë¡œí•„ì´ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                let savedHtml = '';
                savedUsers.forEach((user, index) => {
                    savedHtml += `
                        <div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0; border-radius: 5px;">
                            <img src="${user.picture.thumbnail}" style="width: 40px; height: 40px; border-radius: 50%; vertical-align: middle;">
                            <strong>${user.name.first} ${user.name.last}</strong> (${user.email})
                            <button class="btn" style="padding: 5px 10px; float: right;" onclick="loadUser(${index})">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                            <button class="btn" style="padding: 5px 10px; float: right; background: #dc3545;" onclick="deleteUser(${index})">ì‚­ì œ</button>
                            <br><small>ì €ì¥ì‹œê°„: ${user.savedAt}</small>
                        </div>
                    `;
                });
                $('#savedList').html(savedHtml);
            }

            // ì „ì—­ í•¨ìˆ˜ë¡œ ì‚¬ìš©ì ë¶ˆëŸ¬ì˜¤ê¸°
            window.loadUser = function(index) {
                const savedUsers = JSON.parse(localStorage.getItem('savedUsers') || '[]');
                currentUser = savedUsers[index];
                displayUser(currentUser);
            };

            // ì „ì—­ í•¨ìˆ˜ë¡œ ì‚¬ìš©ì ì‚­ì œ
            window.deleteUser = function(index) {
                if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    const savedUsers = JSON.parse(localStorage.getItem('savedUsers') || '[]');
                    savedUsers.splice(index, 1);
                    localStorage.setItem('savedUsers', JSON.stringify(savedUsers));
                    displaySavedUsers();
                }
            };

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì‚¬ìš©ìë“¤ í‘œì‹œ
            displaySavedUsers();

            // ì €ì¥ëœ ì‚¬ìš©ì ë¶ˆëŸ¬ì˜¤ê¸° (ëœë¤)
            $('#loadSavedUser').click(function() {
                const savedUsers = JSON.parse(localStorage.getItem('savedUsers') || '[]');
                if (savedUsers.length === 0) {
                    alert('ì €ì¥ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤!');
                    return;
                }
                const randomIndex = Math.floor(Math.random() * savedUsers.length);
                loadUser(randomIndex);
            });
        });
    </script>
</body>
</html>